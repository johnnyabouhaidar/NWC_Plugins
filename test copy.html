<!DOCTYPE html>
<html>
<head>

    <style>
        table, th, td 
        {
            border: solid 1px #ddd;
            border-collapse: collapse;
            padding: 2px 3px;
            text-align: center;
        }
        th { 
            font-weight:bold;
        }
    </style>
</head>
<body>

    <p id="showData"></p>
    

<div id="dvCustomersGrid"></div>

</body>

<script>

async function addnewFunc()
{
  //alert(document.getElementById("new1").value)

  const addurl = `https://iccleb.sharepoint.com/sites/NintexTrainee/JohnnyAbouHaidar/_api/web/lists/GetByTitle('list2read')/items`;
  
// Defining async function

    
    // Storing response
    const response = await fetch(addurl, {
  method: "POST",

  headers: {
   // "Content-Type": "application/json"    --> option 1 (not working)
    "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTBmZjEtY2UwMC0wMDAwMDAwMDAwMDAvaWNjbGViLnNoYXJlcG9pbnQuY29tQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsImlzcyI6IjAwMDAwMDAxLTAwMDAtMDAwMC1jMDAwLTAwMDAwMDAwMDAwMEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJpYXQiOjE2NzY0NDg2ODIsIm5iZiI6MTY3NjQ0ODY4MiwiZXhwIjoxNjc2NTM1MzgyLCJpZGVudGl0eXByb3ZpZGVyIjoiMDAwMDAwMDEtMDAwMC0wMDAwLWMwMDAtMDAwMDAwMDAwMDAwQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsIm5hbWVpZCI6ImM4YTc2ZjkzLThjNmItNDExYy04ZDQ0LTU4OWE5MmNhMWM5MEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJvaWQiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJzdWIiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJ0cnVzdGVkZm9yZGVsZWdhdGlvbiI6ImZhbHNlIn0.orUAn5V1e7Zrpi28ycf1HFYuf0IruAnQq9a4bL7osTJx48xKAfCYLx-yavc2Pyvzmv433ApvUpbD4RJm2_VAMdW5GG6GrL_PCQ5Jg0kdjUY-v3Oa5c1cvGJbLVn27ER4VWOlTanHwJhlUjc9WAGHcWXkLotdMNojsBJ0tdXKWWEJ98MZEUqWAzrpaDsvhDo0BQEzUnAJJYQezK0t0ul_LODq_BBg4EjTuO6_-zazwWlsbqL_GerulcsNIPjVKE1eEJCLRI__HItqy8pz3GiOR5vvCdAnUd_FA72Sx-MPeDQqeyS-22oOr4l5OjnI-8c_IDO_yJASLqgMxDSIckp9jA" ,
    "Accept":"application/json;odata=verbose",
    "Content-Type": "application/json;odata=verbose",


   // "Content-Type": "multipart/form-data"  
   // "Content-Type": "text/plain"    --> option 4
  },

 body:JSON.stringify({
  "__metadata": {
    "type": "SP.ListItem"
  },
  "Title": document.getElementById("new1").value
})


});
    
location.reload();
}


async function updateitem(idd)
{

  const addurl = `https://iccleb.sharepoint.com/sites/NintexTrainee/JohnnyAbouHaidar/_api/web/lists/GetByTitle('list2read')/items(${idd})`;
  
// Defining async function

    
    // Storing response
    const response = await fetch(addurl, {
  method: "POST",

  headers: {
   // "Content-Type": "application/json"    --> option 1 (not working)
    "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTBmZjEtY2UwMC0wMDAwMDAwMDAwMDAvaWNjbGViLnNoYXJlcG9pbnQuY29tQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsImlzcyI6IjAwMDAwMDAxLTAwMDAtMDAwMC1jMDAwLTAwMDAwMDAwMDAwMEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJpYXQiOjE2NzY0NDg2ODIsIm5iZiI6MTY3NjQ0ODY4MiwiZXhwIjoxNjc2NTM1MzgyLCJpZGVudGl0eXByb3ZpZGVyIjoiMDAwMDAwMDEtMDAwMC0wMDAwLWMwMDAtMDAwMDAwMDAwMDAwQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsIm5hbWVpZCI6ImM4YTc2ZjkzLThjNmItNDExYy04ZDQ0LTU4OWE5MmNhMWM5MEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJvaWQiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJzdWIiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJ0cnVzdGVkZm9yZGVsZWdhdGlvbiI6ImZhbHNlIn0.orUAn5V1e7Zrpi28ycf1HFYuf0IruAnQq9a4bL7osTJx48xKAfCYLx-yavc2Pyvzmv433ApvUpbD4RJm2_VAMdW5GG6GrL_PCQ5Jg0kdjUY-v3Oa5c1cvGJbLVn27ER4VWOlTanHwJhlUjc9WAGHcWXkLotdMNojsBJ0tdXKWWEJ98MZEUqWAzrpaDsvhDo0BQEzUnAJJYQezK0t0ul_LODq_BBg4EjTuO6_-zazwWlsbqL_GerulcsNIPjVKE1eEJCLRI__HItqy8pz3GiOR5vvCdAnUd_FA72Sx-MPeDQqeyS-22oOr4l5OjnI-8c_IDO_yJASLqgMxDSIckp9jA" ,
    "Accept":"application/json;odata=verbose",
    "Content-Type": "application/json;odata=verbose",
    "If-Match": "*",
    "X-HTTP-Method": "MERGE"


   // "Content-Type": "multipart/form-data"  
   // "Content-Type": "text/plain"    --> option 4
  },

 body:JSON.stringify({
  "__metadata": {
    "type": "SP.ListItem"
  },
  "Title": "updateeeeedddd"
})


});
    
location.reload();
}


async function deleteitem(idd)
{
  const delurl = `https://iccleb.sharepoint.com/sites/NintexTrainee/JohnnyAbouHaidar/_api/web/lists/GetByTitle('list2read')/items(${idd})`;
  
// Defining async function

    
    // Storing response
    const response = await fetch(delurl, {
  method: "POST",

  headers: {
   // "Content-Type": "application/json"    --> option 1 (not working)
    "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTBmZjEtY2UwMC0wMDAwMDAwMDAwMDAvaWNjbGViLnNoYXJlcG9pbnQuY29tQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsImlzcyI6IjAwMDAwMDAxLTAwMDAtMDAwMC1jMDAwLTAwMDAwMDAwMDAwMEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJpYXQiOjE2NzY0NDg2ODIsIm5iZiI6MTY3NjQ0ODY4MiwiZXhwIjoxNjc2NTM1MzgyLCJpZGVudGl0eXByb3ZpZGVyIjoiMDAwMDAwMDEtMDAwMC0wMDAwLWMwMDAtMDAwMDAwMDAwMDAwQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsIm5hbWVpZCI6ImM4YTc2ZjkzLThjNmItNDExYy04ZDQ0LTU4OWE5MmNhMWM5MEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJvaWQiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJzdWIiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJ0cnVzdGVkZm9yZGVsZWdhdGlvbiI6ImZhbHNlIn0.orUAn5V1e7Zrpi28ycf1HFYuf0IruAnQq9a4bL7osTJx48xKAfCYLx-yavc2Pyvzmv433ApvUpbD4RJm2_VAMdW5GG6GrL_PCQ5Jg0kdjUY-v3Oa5c1cvGJbLVn27ER4VWOlTanHwJhlUjc9WAGHcWXkLotdMNojsBJ0tdXKWWEJ98MZEUqWAzrpaDsvhDo0BQEzUnAJJYQezK0t0ul_LODq_BBg4EjTuO6_-zazwWlsbqL_GerulcsNIPjVKE1eEJCLRI__HItqy8pz3GiOR5vvCdAnUd_FA72Sx-MPeDQqeyS-22oOr4l5OjnI-8c_IDO_yJASLqgMxDSIckp9jA" ,
    "Accept":"application/json;odata=verbose",
    "Content-Type": "application/json",
    "If-Match": "*",
    "X-HTTP-Method": "DELETE"
   // "Content-Type": "multipart/form-data"  
   // "Content-Type": "text/plain"    --> option 4
  },

 

});
    
location.reload();
}




  let tableFromJson = () => {

    const api_url = 
      "https://iccleb.sharepoint.com/sites/NintexTrainee/JohnnyAbouHaidar/_api/web/lists/GetByTitle('list2read')/items";
  
// Defining async function
async function getapi(url) {
    
    // Storing response
    const response = await fetch(url, {
  method: "GET",

  headers: {
   // "Content-Type": "application/json"    --> option 1 (not working)
    "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTBmZjEtY2UwMC0wMDAwMDAwMDAwMDAvaWNjbGViLnNoYXJlcG9pbnQuY29tQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsImlzcyI6IjAwMDAwMDAxLTAwMDAtMDAwMC1jMDAwLTAwMDAwMDAwMDAwMEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJpYXQiOjE2NzY0NDg2ODIsIm5iZiI6MTY3NjQ0ODY4MiwiZXhwIjoxNjc2NTM1MzgyLCJpZGVudGl0eXByb3ZpZGVyIjoiMDAwMDAwMDEtMDAwMC0wMDAwLWMwMDAtMDAwMDAwMDAwMDAwQGIxMzQ4ZjUwLTAzMGUtNGVhMS04ZDQ0LTQ5M2VlMTlmODhkOCIsIm5hbWVpZCI6ImM4YTc2ZjkzLThjNmItNDExYy04ZDQ0LTU4OWE5MmNhMWM5MEBiMTM0OGY1MC0wMzBlLTRlYTEtOGQ0NC00OTNlZTE5Zjg4ZDgiLCJvaWQiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJzdWIiOiJiMzAwYzlmZC02ZDA0LTQxMzctOGYyYS0yMGM4MTUyNWViNGYiLCJ0cnVzdGVkZm9yZGVsZWdhdGlvbiI6ImZhbHNlIn0.orUAn5V1e7Zrpi28ycf1HFYuf0IruAnQq9a4bL7osTJx48xKAfCYLx-yavc2Pyvzmv433ApvUpbD4RJm2_VAMdW5GG6GrL_PCQ5Jg0kdjUY-v3Oa5c1cvGJbLVn27ER4VWOlTanHwJhlUjc9WAGHcWXkLotdMNojsBJ0tdXKWWEJ98MZEUqWAzrpaDsvhDo0BQEzUnAJJYQezK0t0ul_LODq_BBg4EjTuO6_-zazwWlsbqL_GerulcsNIPjVKE1eEJCLRI__HItqy8pz3GiOR5vvCdAnUd_FA72Sx-MPeDQqeyS-22oOr4l5OjnI-8c_IDO_yJASLqgMxDSIckp9jA" ,
    "Accept":"application/json"
   // "Content-Type": "multipart/form-data"  
   // "Content-Type": "text/plain"    --> option 4
  },

 

});
    
    // Storing data in form of JSON
    var data = await response.json();
    console.log(data.value);



    let tab = 
        `<table><tr>
          <th>Title</th>
          <th>col1</th>
          <th>col2</th>

         </tr>`;
    
    // Loop to access all rows 
    for (let r of data.value) {
        tab += `<tr> 
    <td><input value="${r.Title}"> </td>
    <td><input value="${r.OData__x0066_p31}"></td>
    <td><input value="${r.odmd}"></td> 
    <td><button onclick="deleteitem('${r.Id}')">DELETE</a></td>
    <td><button onclick="updateitem('${r.Id}')">UPDATE</a></td>          
</tr>`;
    }
    // Setting innerHTML as tab variable
    tab += `<tr> 
    <td><input id = "new1" value=""> </td>
    <td><input id ="new2" value=""></td>
    <td><input  id ="new3"  value=""></td> 
    <td><button id="newbtn" onclick="addnewFunc()">+</a></td>          
</tr>`
    var obj=document.createElement("newww")
    obj.innerHTML = tab;
    document.body.appendChild(obj);  
    return(tab)

}

// Calling that async function
getapi(api_url)
  
  }
tableFromJson()
</script>
</html>